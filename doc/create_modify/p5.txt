ğŸ”¥ PROMPT #5 â€” CREATE / MODIFY ORDER
Actions, Submit, Cancel, Delete, Polling, Navigazione

(leggi tutto prima di scrivere UNA riga di codice)

CONTESTO (NON INVENTARE NULLA)

Stiamo implementando UNA SOLA PAGINA:

/orders/create
/orders/modify/:orderId


Ãˆ LA STESSA PAGINA, con comportamenti diversi in base alla modalitÃ :

mode = "create"

mode = "modify"

ğŸ‘‰ NON creare due pagine
ğŸ‘‰ NON duplicare logica
ğŸ‘‰ NON infilare logica nei componenti

La pagina ancora NON ESISTE, quindi:

NON parlare di bug preesistenti

MA progettala in modo che NON POSSA avere loader infiniti

ğŸ§  ARCHITETTURA OBBLIGATORIA (UGUALE A HOME / ORDERS)
resources/js/pages/order-form/
  index.js                // orchestratore
  orderForm.state.js      // SOLO dati (SSOT)
  orderForm.view.js       // SOLO DOM refs
  orderForm.api.js        // SOLO fetch
  orderForm.actions.js    // logica eventi
  orderForm.render.js     // state â†’ UI
  orderForm.hydration.js  // bootstrap iniziale


Componenti UI:

resources/js/components/
  IngredientSection.component.js
  IngredientItem.component.js
  TimeSlotSelector.component.js
  ActionFooter.component.js


ğŸ‘‰ I componenti accettano solo props e renderizzano.
ğŸ‘‰ ZERO fetch, ZERO logica di stato, ZERO side effects.

1ï¸âƒ£ MODALITÃ€ PAGINA (FONDAMENTALE)
CREATE MODE

nessun ingrediente selezionato

nessun time slot selezionato

giorno selezionato = today

submit = Create Order

MODIFY MODE

ingredienti pre-popolati

pickup day e time NON ESISTONO

submit = Save Changes

delete = Delete Order

ğŸ‘‰ In modify NON puoi cambiare giorno o slot
ğŸ‘‰ Modifichi SOLO il panino

2ï¸âƒ£ ACTIONS â€” COSA DEVONO FARE (PRECISO)
ğŸ”¹ selectIngredient(ingredientId)

se available === false â†’ IGNORA

se categoria bread:

deseleziona eventuale pane giÃ  selezionato

toggle selected

âš ï¸ Non esiste disabled
âš ï¸ Non esiste logica UI arbitraria

ğŸ”¹ selectIngredientSection(sectionId)

UNA SOLA sezione aperta alla volta

se apro una sezione:

chiudo TUTTE le altre

stato:

openSectionId: string | null

ğŸ”¹ selectTimeSlot(slotId)

SOLO in CREATE

se slot non disponibile â†’ IGNORA

seleziona slot

se slot diventa full via polling:

rimuovi selezione

disabilita submit

ğŸ”¹ submitOrder()
CREATE

valida:

1 pane selezionato

â‰¥1 ingrediente totale

time slot selezionato

POST /api/orders

await response

redirect â†’ /orders

MODIFY

valida ingredienti

PUT /api/orders/:id

await response

redirect â†’ /orders

ğŸ‘‰ Nessun redirect prima della risposta
ğŸ‘‰ Nessun optimistic submit

ğŸ”¹ cancel()

NON salvare nulla

redirect â†’ /orders

ğŸ”¹ deleteOrder() (SOLO MODIFY)

DELETE /api/orders/:id

await response

redirect â†’ /orders

3ï¸âƒ£ POLLING (OBBLIGATORIO)

Questa pagina DEVE avere polling, punto.

Intervallo
5 secondi

CREATE MODE â†’ polling chiede:

ingredient availability

time slot availability (per giorno selezionato)

MODIFY MODE â†’ polling chiede:

ingredient availability

stato ordine (se cancellato o non piÃ¹ valido)

Quando arriva risposta:

aggiorna state

render immediato

se qualcosa non Ã¨ piÃ¹ valido:

ingredienti â†’ rimossi

slot â†’ deselezionato

ğŸ‘‰ La UI non decide
ğŸ‘‰ La UI reagisce

4ï¸âƒ£ NAVIGAZIONE E HEADER
Back arrow

sempre â†’ /orders

Logout

NON navigare

chiama /logout

await risposta

set isAuth = false

redirect â†’ /

ğŸ‘‰ NON esiste una pagina /logout

5ï¸âƒ£ FOOTER ACTIONS (CTA)
CREATE

pulsante disabilitato se:

manca pane

manca slot

label: Create Order

MODIFY

pulsante disabilitato se:

ingredienti invalidi

label: Save Changes

bottone secondario: Delete Order

6ï¸âƒ£ ERRORI DA NON RIPETERE (CHIARO?)

âŒ non inventare stati (disabled)
âŒ non fare fetch nei componenti
âŒ non duplicare logica create/modify
âŒ non hardcodare testi
âŒ non usare light mode
âŒ non decidere regole lato UI
âŒ non navigare prima dellâ€™ACK

7ï¸âƒ£ CHECKLIST FINALE (OBBLIGATORIA)

 una sola pagina

 mode create / modify gestito da state

 polling attivo

 ingredienti rimossi se finiscono

 slot deselezionato se diventa full

 submit solo dopo ACK

 redirect solo dopo successo

 componenti riusabili

 WCAG AAA (focus, aria, contrasto)

Se qualcosa non Ã¨ chiaro, fermati e chiedi prima.
Se Ã¨ chiaro, implementa ESATTAMENTE questo senza â€œinterpretazioni creativeâ€.