ğŸ“Œ PROMPT #1 â€” PAGINA UNICA CREATE / MODIFY ORDER
(gestione dati, flussi, responsabilitÃ )

Devi implementare UNA SOLA pagina per la creazione e modifica degli ordini.
NON devono esistere due pagine separate (create e modify), ma una pagina unica con comportamenti diversi in base alla modalitÃ .

ğŸ¯ OBIETTIVO FUNZIONALE

La pagina deve funzionare in due modalitÃ :

ğŸŸ¢ CREATE MODE

Lâ€™utente crea un nuovo ordine

Nessun ordine pre-esistente

Tutti i dati partono â€œvuotiâ€

Pickup day & time presenti

Bottone Create Order attivo solo se lâ€™ordine Ã¨ valido

ğŸŸ¡ MODIFY MODE

Lâ€™utente modifica un ordine esistente

I dati dellâ€™ordine vengono precaricati

Pickup day & time NON visibili

Bottone Modify Order

Alcuni ingredienti possono essere disabilitati

Alcune sezioni possono risultare non selezionabili

ğŸ§­ COME SI ENTRA NELLA PAGINA (PUNTO CRITICO)
âš ï¸ REGOLA FONDAMENTALE

ğŸ‘‰ NON passare MAI lâ€™intero ordine nel frontend
ğŸ‘‰ NON usare query string con ingredienti, slot, ecc
ğŸ‘‰ NON serializzare oggetti nel DOM

âœ… CREATE MODE

La pagina viene aperta senza parametri:

/orders/create


Risultato:

mode = "create"

stato vuoto

nessun preload

âœ… MODIFY MODE

La pagina viene aperta SOLO con lâ€™ID dellâ€™ordine:

/orders/modify/{orderId}


E basta. Nientâ€™altro.

ğŸ”Œ RESPONSABILITÃ€ BACKEND (OBBLIGATORIE)

Il backend deve esporre un endpoint dedicato:

GET /api/orders/{orderId}


Questo endpoint:

verifica che lâ€™ordine esista

verifica che appartenga allâ€™utente loggato

verifica che sia modificabile

ritorna:

ingredienti selezionati

stato ordine

configurazione valida

ingredienti NON piÃ¹ disponibili

eventuali vincoli

âš ï¸ Il backend Ã¨ lâ€™unica fonte di veritÃ .

ğŸ§  RESPONSABILITÃ€ FRONTEND
In hydration:

leggere orderId dalla route

se presente â†’ mode = modify

chiamare GET /api/orders/{orderId}

popolare lo state con i dati ricevuti

In state:

Deve esistere uno stato chiaro e immutabile:

mode: 'create' | 'modify'
currentOrderId: null | string
initialOrderSnapshot: {...}

ğŸ”„ DIFFERENZE DI COMPORTAMENTO (VINCOLANTI)
ğŸ”¹ Pickup Day & Time

CREATE â†’ visibili e selezionabili

MODIFY â†’ completamente rimossi dal DOM

ğŸ”¹ Ingredienti

Gli ingredienti finiscono o diventano non validi?

Il backend li segnala

Il frontend:

li disabilita

li rimuove dalla selezione

segnala visivamente che non sono piÃ¹ disponibili

ğŸ”¹ Bottone di Submit

Disabilitato se:

manca il pane

manca lo slot (solo create)

ğŸš« COSE VIETATE (RIPETO)

âŒ duplicare pagine

âŒ passare oggetti ordine via JS

âŒ decidere lato frontend se un ordine Ã¨ modificabile

âŒ logica business nei componenti

âŒ fetch nei componenti

âœ… OBIETTIVO DI QUESTO PROMPT

Alla fine di questa fase:

esiste UNA pagina

il backend controlla la veritÃ 

il frontend reagisce allo stato

create e modify condividono il codice

nessun hack

ğŸ‘‰ NON implementare ancora UI dettagliata o componenti.
ğŸ‘‰ Se qualcosa non Ã¨ chiaro, fermati e fai domande prima di procedere.

ğŸ”œ PROSSIMO STEP